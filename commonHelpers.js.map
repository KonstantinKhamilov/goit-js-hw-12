{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43943872-0cd26c97fed3a84845e31fcef';\n\nexport function fetchImages(query, page) {\n  return axios\n    .get(\n      `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`\n    )\n    .then(response => response.data.hits)\n    .catch(error => console.error(error));\n}\n","export function renderImages(images, container) {\n  if (images.length === 0) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Изображения, соответствующие вашему запросу, не найдены. Пожалуйста, попробуйте еще раз.',\n    });\n    return;\n  }\n\n  const markup = images\n    .map(\n      image => `\n      <li class=\"image-card\">\n  <a href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"\" style=\"height:150px; width:150px;\"/></a>\n  <div class=\"image-info\">\n    <p><span>Просмотры: </span>${image.views}</p>\n    <p><span>Загрузки: </span>${image.downloads}</p>\n    <p><span>Лайки: </span>${image.likes}</p>\n    <p><span>Комментарии: </span>${image.comments}</p>\n  </div>\n</li>\n  `\n    )\n    .join('');\n  container.innerHTML += markup;\n}\n\nexport function scrollToNextPage() {\n  const imageCard = document.querySelector('.image-card');\n  const cardHeight = imageCard.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, scrollToNextPage } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('#search-form');\nconst input = document.querySelector('#search-input');\nconst gallery = document.querySelector('#gallery');\nconst loader = document.querySelector('#loader');\nconst loadMoreButton = document.querySelector('#load-more');\n\nlet currentPage = 1;\nlet lightbox;\nlet query = '';\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  query = input.value.trim();\n  if (!query) {\n    alert('Пожалуйста, введите ключевое слово для поиска');\n    return;\n  }\n\n  currentPage = 1;\n  gallery.innerHTML = '';\n  fetchAndRenderImages();\n});\n\nloadMoreButton.addEventListener('click', fetchAndRenderImages);\n\nfunction fetchAndRenderImages() {\n  loader.classList.remove('hidden');\n\n  fetchImages(query, currentPage++)\n    .then(images => {\n      console.log(images);\n      loader.classList.add('hidden');\n\n      renderImages(images, gallery);\n\n      lightbox = new SimpleLightbox('.image-card a', {});\n\n      if (images.length === 15) {\n        loadMoreButton.style.display = 'block';\n      } else {\n        loadMoreButton.style.display = 'none';\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n      scrollToNextPage(); // Вызовите функцию scrollToNextPage после добавления изображений\n    })\n    .catch(error => {\n      console.error(error);\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Произошла ошибка при загрузке изображений. Пожалуйста, попробуйте еще раз.',\n      });\n    });\n}\n"],"names":["API_KEY","fetchImages","query","page","axios","response","error","renderImages","images","container","markup","image","scrollToNextPage","cardHeight","form","input","gallery","loader","loadMoreButton","currentPage","event","fetchAndRenderImages","SimpleLightbox","iziToast"],"mappings":"owBAEA,MAAMA,EAAU,qCAET,SAASC,EAAYC,EAAOC,EAAM,CACvC,OAAOC,EACJ,IACC,gCAAgCJ,CAAO,MAAME,CAAK,iEAAiEC,CAAI,cACxH,EACA,KAAKE,GAAYA,EAAS,KAAK,IAAI,EACnC,MAAMC,GAAS,QAAQ,MAAMA,CAAK,CAAC,CACxC,CCXO,SAASC,EAAaC,EAAQC,EAAW,CAC9C,GAAID,EAAO,SAAW,EAAG,CACvB,SAAS,MAAM,CACb,MAAO,QACP,QACE,0FACR,CAAK,EACD,MACD,CAED,MAAME,EAASF,EACZ,IACCG,GAAS;AAAA;AAAA,aAEFA,EAAM,aAAa,eAAeA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,iCAEpDA,EAAM,KAAK;AAAA,gCACZA,EAAM,SAAS;AAAA,6BAClBA,EAAM,KAAK;AAAA,mCACLA,EAAM,QAAQ;AAAA;AAAA;AAAA,GAI5C,EACA,KAAK,EAAE,EACVF,EAAU,WAAaC,CACzB,CAEO,SAASE,GAAmB,CAEjC,MAAMC,EADY,SAAS,cAAc,aAAa,EACzB,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CC5BA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIC,EAAc,EAEdjB,EAAQ,GAEZY,EAAK,iBAAiB,SAAUM,GAAS,CAGvC,GAFAA,EAAM,eAAc,EACpBlB,EAAQa,EAAM,MAAM,OAChB,CAACb,EAAO,CACV,MAAM,+CAA+C,EACrD,MACD,CAEDiB,EAAc,EACdH,EAAQ,UAAY,GACpBK,GACF,CAAC,EAEDH,EAAe,iBAAiB,QAASG,CAAoB,EAE7D,SAASA,GAAuB,CAC9BJ,EAAO,UAAU,OAAO,QAAQ,EAEhChB,EAAYC,EAAOiB,GAAa,EAC7B,KAAKX,GAAU,CACd,QAAQ,IAAIA,CAAM,EAClBS,EAAO,UAAU,IAAI,QAAQ,EAE7BV,EAAaC,EAAQQ,CAAO,EAEjB,IAAIM,EAAe,gBAAiB,CAAA,CAAE,EAE7Cd,EAAO,SAAW,GACpBU,EAAe,MAAM,QAAU,SAE/BA,EAAe,MAAM,QAAU,OAC/BK,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACnB,CAAS,GAEHX,GACN,CAAK,EACA,MAAMN,GAAS,CACd,QAAQ,MAAMA,CAAK,EACnBiB,EAAS,MAAM,CACb,MAAO,QACP,QACE,4EACV,CAAO,CACP,CAAK,CACL"}